<%= render "shared/header" %>

<div class="postShow__container">
  <div class="postShow__headerText">
    <%= @post.title %>
  </div>

  <div class="postShow__details">
    <table class="postShow__table">
      <tbody>
        <tr>
          <th class="postShow__label">タイトル</th>
          <td class="postShow__value"><%= @post.title %></td>
        </tr>
        <tr>
          <th class="postShow__label">予定日</th>
          <td class="postShow__value"><%= @post.scheduled_date.strftime('%Y年%m月%d日') %></td>
        </tr>
        <tr>
          <th class="postShow__label">バイクジャンル</th>
          <td class="postShow__value"><%= @post.bike_genre.name %></td>
        </tr>
        <tr>
          <th class="postShow__label">排気量</th>
          <td class="postShow__value"><%= @post.engine_capacity.name %></td>
        </tr>
        <tr>
          <th class="postShow__label">都道府県</th>
          <td class="postShow__value"><%= @post.prefecture.name %></td>
        </tr>
        <tr>
        <th class="postShow__label">メモ</th>
          <td class="postShow__value postShow__value--note">
          <%= @post.note.presence || 'メモはありません' %>
          </td>
        </tr>

      </tbody>
    </table>
  </div>

  <% if user_signed_in? %>
    <% if current_user == @post.user %>
      <div class="postShow__actions">
        <%= link_to "編集する", edit_post_path(@post), class: "postShow__editButton", data: { turbo: false } %>
        <%= link_to "削除する", post_path(@post), data: { turbo_method: :delete }, class: "postShow__deleteButton" %>
      </div>
    <% end %>
  <% end %>

  <div class="postShow__backLink">
    <%= link_to "投稿一覧に戻る", posts_path, class: "postShow__backButton" %>
  </div>

  <h2>コメント一覧</h2>
<% @post.comments.each do |comment| %>
  <p><strong><%= comment.user.nickname %></strong>: <%= comment.content %></p>
<% end %>

<h3>コメントを投稿する</h3>
<%= form_with model: [@post, Comment.new], local: true do |f| %>
  <div>
    <%= f.label :content, 'コメント内容' %><br>
    <%= f.text_area :content %>
  </div>
  <div>
    <%= f.submit '投稿' %>
  </div>
<% end %>

</div>

<%= render "shared/footer" %>
